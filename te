<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>STARLUX 虛擬航空｜飛行員轉正考核申請</title>
  <style>
    body {
      font-family: "Noto Sans TC", sans-serif;
      background-color: #f9f9f9;
      color: #333;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 700px;
      margin: 40px auto;
      padding: 30px;
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
      font-weight: 700;
      color: #2c2c2c;
      margin-bottom: 10px;
    }
    h2 {
      text-align: center;
      font-size: 18px;
      color: #555;
      margin-bottom: 30px;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: 600;
    }
    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
      box-sizing: border-box;
    }
    textarea {
      resize: vertical;
    }
    button {
      margin-top: 25px;
      background-color: #000;
      color: white;
      border: none;
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
    }
    button:hover {
      background-color: #444;
    }
    .note {
      font-size: 12px;
      color: #777;
    }
    #result-page {
      display: none;
    }
    #result-page h2 {
      margin-bottom: 20px;
    }
    #result-content p {
      font-size: 18px;
      margin: 10px 0;
      font-weight: 600;
    }
    #exam-code {
      margin-top: 20px;
      font-weight: 700;
      font-size: 20px;
      color: #222;
    }
  </style>
</head>
<body>
  <div class="container" id="form-page">
    <h1>STARLUX Virtual Aviation</h1>
    <h2>飛行員轉正考核申請表</h2>

    <div id="pilot-form">
      <label for="name">真實姓名 / 虛擬姓名</label>
      <input type="text" id="name" name="name" required />

      <label for="discord">Discord ID（包含 #）</label>
      <input type="text" id="discord" name="discord" required />

      <label for="pilot-id">飛行員代號（例如：STX123）</label>
      <input type="text" id="pilot-id" name="pilot_id" required />

      <label for="current-rank">目前職級</label>
      <select id="current-rank" name="current_rank" required>
        <option value="">請選擇</option>
        <option value="見習副機師">見習副機師</option>
        <option value="副機師">副機師</option>
      </select>

      <label for="self-assessment">自我評估 / 補充說明</label>
      <textarea id="self-assessment" name="self_assessment" rows="4" placeholder="可說明你對飛行程序、溝通、紀律等方面的自評..."></textarea>

      <p class="note">※ 申請送出後，審核小組將於 3~5 個工作日內回覆。</p>

      <button id="submit-btn" type="button">提交申請</button>
    </div>
  </div>

  <div class="container" id="result-page">
    <h1>申請結果</h1>
    <h2>感謝您的申請，以下是您提交的資料：</h2>
    <div id="result-content"></div>
    <div id="exam-code"></div>
  </div>

  <script>
    const webhookUrl = "https://discord.com/api/webhooks/1381616410752454666/FFS3owJKcEUw8uHH3U1ltrlzds9-AhiaH00pWD9MdqA7lMWBX-HK9ARZX1PEuv4eQkgN";

    document.getElementById('submit-btn').addEventListener('click', function() {
      // 取值
      const name = document.getElementById('name').value.trim();
      const discord = document.getElementById('discord').value.trim();
      const pilotId = document.getElementById('pilot-id').value.trim();
      const currentRank = document.getElementById('current-rank').value;
      const selfAssessment = document.getElementById('self-assessment').value.trim() || "無";

      // 驗證必填欄位
      if (!name) {
        alert('請填寫真實姓名 / 虛擬姓名');
        return;
      }
      if (!discord) {
        alert('請填寫 Discord ID');
        return;
      }
      if (!pilotId) {
        alert('請填寫飛行員代號');
        return;
      }
      if (!currentRank) {
        alert('請選擇目前職級');
        return;
      }

      // 產生五位隨機數字
      const randomNum = Math.floor(10000 + Math.random() * 90000);
      const examCode = `考試代碼：${randomNum}`;

      // 組成要送到 Discord 的訊息內容
      const discordMessage = {
        content: null,
        embeds: [{
          title: "飛行員轉正考核申請表單",
          color: 7506394,
          fields: [
            { name: "名稱", value: name, inline: false },
            { name: "Discord ID", value: discord, inline: false },
            { name: "飛行員代號", value: pilotId, inline: false },
            { name: "目前階級", value: currentRank, inline: false },
            { name: "自我評估", value: selfAssessment, inline: false },
            { name: "考試代碼", value: randomNum.toString(), inline: false }
          ],
          timestamp: new Date().toISOString()
        }]
      };

      // 送出 POST 請求到 Discord Webhook
      fetch(webhookUrl, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(discordMessage)
      }).then(response => {
        if (!response.ok) {
          alert("發送到 Discord 失敗！");
          return;
        }
        // 顯示結果
        document.getElementById('result-content').innerHTML = `
          <p><strong>名稱：</strong> ${name}</p>
          <p><strong>DISCORD ID：</strong> ${discord}</p>
          <p><strong>飛行員代號：</strong> ${pilotId}</p>
          <p><strong>目前階級：</strong> ${currentRank}</p>
          <p><strong>自我評估：</strong> ${selfAssessment}</p>
        `;
        document.getElementById('exam-code').textContent = examCode;

        // 切換畫面
        document.getElementById('form-page').style.display = 'none';
        document.getElementById('result-page').style.display = 'block';
      }).catch(error => {
        alert("發送到 Discord 發生錯誤: " + error.message);
      });
    });
  </script>
</body>
</html>
